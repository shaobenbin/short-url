## 短地址服务

> 短地址服务功能比较简单，现在网上存活的短地址服务也越来越少，即使存活下来的又需要收费，又需要认证等等，因此自己搭建一个也是不错的选择
> 


### 依赖
1. python 3
2. tornado


### 使用方法

> 建议使用[virtualenv](https://github.com/pypa/virtualenv)和virtualenvwrapper

1. git clone 本项目
2. cd 本项目
3. pip install -r requirements.txt
4. python server.py




### 原理

短地址的原理就是简单的映射关系，一个短地址映射成一个完整的url地址。所以核心问题只有如何给一个url地址分配一个短地址，那么经过短暂的搜索以及我个人直觉，使用填坑式的分配方式也许是性价比最高的方案。

填坑式的分配方式：就是事先准备好一堆的短地址，然后当有url地址需要使用短地址服务时候，就直接分配其中一个短地址，这种方式避免了碰撞问题。

填坑式的分配方式的优化方案：这里有出现一个核心问题，如何事先分配短地址服务，最简单的方式就是利用数据库自增id来实现，但是自增id是一个十进制数字，有点不太像短地址，那么就把十进制变成62进制。

### 十进制与62进制转换

十进制转换成16进制这个大家都很熟悉，就是满16进位，16位进位表述如下

```
0,1,2,3,4,5,6,7,8,9,a,b,c,d,e,f

```

十进制转换成62进制也是一样的套路,62位的表述如下

```
[  '0', '1', '2', '3', '4', '5', '6', '7', '8', '9','a', 'b',
   'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n',
   'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z',
   'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L',
   'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X',
   'Y', 'Z'  ]

```

小技巧,更改62位的表述方法，将会生成自己的特殊62进制特殊表达式，因为在短地址服务里面，62进制只是一个简单的标识符，如果你不希望别人通过62进制能轻松猜测出10进制的id，那么混淆62进制表述即可.这时候我更愿意把这个62位的表述称之为密钥，比如：

```

['a', '1', '2', '3', '4', 'Q', 'u', '7', '8', '9', '0', 'b',
 'c', 'd', 'e', 'f', 'g', 'h', 'G', 'j', 'k', 'l', 'm', 'n',
 'o', 'Z', 'q', 'r', 's', 'H', '6', 'v', 'w', 'x', 'y', 'z',
 'A', 'B', 'C', 'D', 'E', 'F', 'i', 't', 'I', 'J', 'K', 'L',
 'M', 'N', 'O', 'P', '5', 'R', 'S', 'T', 'U', 'V', 'W', 'X',
 'Y', 'p']

```